<head>
    <script src="/bundle.js"></script>
    <script src="/assets/js/modules/main.js"></script>
    <link rel="stylesheet" href="/assets/css/general.css">
</head>

{{#if userPage}}
    <div class="tile"
         ng-controller="mainCtrl"
         data-ng-init="initSubmissions(userID)">
{{else}}
    <div class="tile"
         ng-controller="mainCtrl"
         data-ng-init="initSubmissions()">
{{/if}}

    <div ng-app="mainApp"
         ng-controller="searchCtrl">
        {{>searchbar}}
    </div>

    <div class="summaries">
        <div ng-show="!dataReady" class="loading-container">
            <img src="/assets/img/loadingSpinner.gif" class="loading-spinner">
            <div class="notebook-summary" ng-repeat="n in [].constructor(10) track by $index">
                <div class="specs">
                    <h3 class="title"></h3>
                    <p class="date"></p>
                    <p class="short"></p>
                </div>
                <p class="avatar">
                    <img src='/assets/img/square-512.jpg'>
                </p>
                <div class="stats">
                    <ul>
                        <li class="views"><span class="count"></span> Views</li>
                        <li class="comments"><span class="count"></span> Comments</li>
                        <li class="votes"><span class="count"></span> Votes</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="notebook-summary"
             ng-repeat="notebook in submissions"
             ng-show="dataReady">

            <div class="specs">
                <h3 class="title"><a href="/notebook/{[{notebook._id}]}/">{[{notebook.title}]}</a></h3>
                <p class="date">

                    <!--todo: check if this accounts for differing timezones-->
                    Published <span am-time-ago="notebook.published"></span> by

                    <a ng-repeat="author in authors | filter: {_id: notebook.author}"
                       href="/user/{[{author._id}]}/">
                        {[{author.name}]}
                    </a>

                    in <a>{[{notebook.language}]}</a></p>
                <p class="short" marked="notebook.summary"></p>
            </div>
            <p class="avatar">
                <a href="/user/{[{notebook.author}]}"
                   ng-repeat="author in authors | filter: {_id: notebook.author}">

                    <img src='{[{author.avatar}]}'>

                </a>
            </p>
            <div class="stats">
                <a href="/notebook/{[{notebook._id}]}/">
                    <ul>
                        <li class="views"><span class="count">{[{notebook.views}]}</span> Views</li>
                        <li class="comments"><span class="count">{[{notebook.totalComments}]}</span> Comments
                        </li>
                        <li class="votes"><span class="count">{[{notebook.score}]}</span> Votes</li>
                    </ul>
                </a>
            </div>
        </div>
        <!--todo: implement and hook up pagination controls-->
        <ul class="pagination text-center" role="navigation" aria-label="Pagination">
            <li class="pagination-previous disabled">Previous</li>
            <li class="current"><span class="show-for-sr">You're on page</span>1</li>
            <li><a href="#" aria-label="Page 2">2</a></li>
            <li><a href="#" aria-label="Page 3">3</a></li>
            <li><a href="#" aria-label="Page 4">4</a></li>
            <li class="ellipsis"></li>
            <li><a href="#" aria-label="Page 12">12</a></li>
            <li><a href="#" aria-label="Page 13">13</a></li>
            <li class="pagination-next"><a href="#" aria-label="Next page">Next</a></li>
        </ul>
    </div>
</div>
